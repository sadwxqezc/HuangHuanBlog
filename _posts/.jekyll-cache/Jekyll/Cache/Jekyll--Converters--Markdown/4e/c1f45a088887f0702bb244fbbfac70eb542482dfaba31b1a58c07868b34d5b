I"A<ul id="markdown-toc">
  <li><a href="#视频格式" id="markdown-toc-视频格式">视频格式</a>    <ul>
      <li><a href="#视频流" id="markdown-toc-视频流">视频流</a></li>
      <li><a href="#音频流" id="markdown-toc-音频流">音频流</a></li>
    </ul>
  </li>
  <li><a href="#传输协议" id="markdown-toc-传输协议">传输协议</a>    <ul>
      <li><a href="#rtmp" id="markdown-toc-rtmp">RTMP</a></li>
      <li><a href="#hls" id="markdown-toc-hls">HLS</a></li>
      <li><a href="#flv" id="markdown-toc-flv">FLV</a></li>
    </ul>
  </li>
  <li><a href="#参考文章" id="markdown-toc-参考文章">参考文章</a></li>
</ul>

<h3 id="视频格式">视频格式</h3>

<blockquote>
  <p>一个完整的视频文件，包含音频，视频和基础元信息，常见的视频文件如<code class="language-plaintext highlighter-rouge">mp4</code>，<code class="language-plaintext highlighter-rouge">mov</code>，<code class="language-plaintext highlighter-rouge">flv</code>实际是一个容器封装，里面包含了音视频等信息。</p>
</blockquote>

<blockquote>
  <p>比如将一个<code class="language-plaintext highlighter-rouge">Xvid</code>视频编码的文件和一个<code class="language-plaintext highlighter-rouge">MP3</code>音频编码文件按照<code class="language-plaintext highlighter-rouge">AVI</code>封装标准封装后，就得到一个<code class="language-plaintext highlighter-rouge">AVI</code>后缀的视频文件，因此视频的本质是：</p>

  <ol>
    <li>设置需要的视频编码</li>
    <li>设置需要的音频编码</li>
    <li>选择需要的容器封装</li>
  </ol>

  <p>一个完整的视频至少包括了上面的三个步骤</p>
</blockquote>

<p>常见的视频封装模式如图：</p>

<p><img src="/pics/vcontainer.png" alt="vcontainer" /></p>

<h4 id="视频流">视频流</h4>

<ol>
  <li><strong>编码格式：</strong> 有<code class="language-plaintext highlighter-rouge">h263</code>，<code class="language-plaintext highlighter-rouge">H264</code>，<code class="language-plaintext highlighter-rouge">H265</code>，<code class="language-plaintext highlighter-rouge">Xvid(MPEG4)</code>，<code class="language-plaintext highlighter-rouge">RM(RMVB)</code>，编码标准有两大系统 <strong>MPEG</strong> 和 <strong>ITU-T</strong>，它们实际是两个组织制定的标准，国际电联（<strong>ITU-T</strong>）制定的标准有<code class="language-plaintext highlighter-rouge">H.261</code>，<code class="language-plaintext highlighter-rouge">H.263</code>，<code class="language-plaintext highlighter-rouge">H.263+</code>，<code class="language-plaintext highlighter-rouge">H.264</code>等，而国际标准化组织（<strong>ISO</strong>）制定的标准有<code class="language-plaintext highlighter-rouge">MPEG-1</code>，<code class="language-plaintext highlighter-rouge">MPEG-2</code>，<code class="language-plaintext highlighter-rouge">MPGE-4</code>等</li>
  <li><strong>帧率：</strong>帧率也被称为<code class="language-plaintext highlighter-rouge">FPS（Frames per second）</code>，是指每秒刷新的图片的帧数，越高的帧率可以得到更流畅逼真的画面，帧率越高对资源的消耗也就越高。</li>
  <li><strong>码率：</strong> 是指视频文件在单位时间使用的数据量，通俗的说法就是取样率，是视频编码中画面质量控制中最重要的部分，一般用的单位是<code class="language-plaintext highlighter-rouge">kb/s</code>或者<code class="language-plaintext highlighter-rouge">Mb/s</code>。通常来说同样分辨率下，视频文件的码率越大，压缩比就越小，画面质量就越好。通常说的码率，是指的视频文件中音频和视频码率的总和。</li>
  <li><strong>分辨率：</strong> 视频分辨率是指视频成像产品所成图像的大小或尺寸，常见分辨率有：<code class="language-plaintext highlighter-rouge">1024*768</code>，<code class="language-plaintext highlighter-rouge">1920*1080</code>等，前者为图像的长度，后者为图像的宽度，单位是像素点</li>
</ol>

<h4 id="音频流">音频流</h4>

<ol>
  <li>编码格式：有<code class="language-plaintext highlighter-rouge">MP3</code>，<code class="language-plaintext highlighter-rouge">AAC</code>，<code class="language-plaintext highlighter-rouge">DTS</code>，<code class="language-plaintext highlighter-rouge">ACE</code>（DVD专用音频编码）等，音质的比较：	<code class="language-plaintext highlighter-rouge">ACC+</code>&gt;<code class="language-plaintext highlighter-rouge">MP3PRO</code>&gt;<code class="language-plaintext highlighter-rouge">ACC</code>&gt;<code class="language-plaintext highlighter-rouge">RealAudio</code>&gt;<code class="language-plaintext highlighter-rouge">WMA</code>&gt;<code class="language-plaintext highlighter-rouge">MP3</code></li>
</ol>

<h3 id="传输协议">传输协议</h3>

<h4 id="rtmp">RTMP</h4>

<p><code class="language-plaintext highlighter-rouge">Real Time Messaging Protocol</code>实时消息传送协议基于TCP来实现，每个时刻的数据收到后立即转发，一般延迟在1-3s左右，由Adobe公司研发</p>

<h4 id="hls">HLS</h4>

<p><code class="language-plaintext highlighter-rouge">HTTP Live Streaming</code>由苹果研发的基于Http的流媒体传输协议，可以实现流媒体的直播和点播。HLS的点播，基本上就是常见的分段HTTP点播，不同之处在于其分段非常小，基本原理就是将视频切成小的分片（TS），并建立索引（m3u8）。相比于其它的传输协议，HLS最大的不同是用点播的方式实现了直播，HLS协议在服务端将直播数据流储存为连续的很短时常的媒体文件，而客户端则不断下载并播放这些小文件，这样来实现直播。由于数据通过HTTP传输，所以完全不用考虑防火墙和代理的问题，而且分段文件的时常很短，可以很快的选择和切换码率，以适应不同条件下的播放。不过这样也导致HLS的延迟会比其它协议高一些，一般在10s以上。</p>

<h4 id="flv">FLV</h4>

<p>基于HTTP长链接，同RTMP一样，每个时刻的数据收到后立刻转发，只不过使用的是HTTP协议，一般延迟在1-3s</p>

<h3 id="参考文章">参考文章</h3>

<p><a href="https://blog.csdn.net/wudebao5220150/article/details/79177761">音视频&amp;流媒体</a></p>
:ET